language: generic
before_install:
- sudo apt-get install texlive-binaries
install:
- export PATH="$HOME/miniconda/bin:$PATH"
- if ! command -v conda > /dev/null; then wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; bash miniconda.sh -b -p $HOME/miniconda -u; conda config --add
  channels conda-forge; conda config --set always_yes yes; conda install tectonic==0.1.12;
  fi
- conda install -c malramsay biber==2.12 --yes
- conda info -a
cache:
  directories:
  - "$HOME/miniconda"
  - "$HOME/.cache/Tectonic"
script:
- cd ./
- tectonic --keep-intermediates --reruns 0 ./sample-sigconf.tex
- if [ -f "sample-sigconf.bcf" ]; then biber sample-sigconf; fi
- tectonic ./sample-sigconf.tex --print
deploy:
  provider: releases
  skip_cleanup: true
  file: "./sample-sigconf.pdf"
  on:
    branch: master
env:
  global:
    secure: XvXnoj643VA6wJig6cwtvmIe1SnL2UDUUR5pCj8eOWufrqG8NaCJAkcMY5KGF7N7wVwyxQHTBWJ8nbPohLHbMCBrzlLIkTpqm+RWP4X2Ujleq8ZqNNbb+BrDMlcPTXkjCsiaT9dAHCzU7KqYQ80FD/fGk/JJmzDCd8ezIad7PtsCtUqaDui1YOapwhcIgtFwE5Uyodl8oI7PPInQIiZf22wn8pS0PCh8gW54QWmzlPxeki/dYc7eT2Ls6urKpmPRmaZeuvWt76T/W36kuLEMreQNYNKOvv+prwpyTQoJBn+RrSivD3dJRBMHUQ8yB8HCvVEIk01//dpfam2AmvPDo+HlkXV+VqhVKq4xV16OtGBGCbx7iA8n3y3NnUGQF1URYfKI4tlnQbKazEYjlovJBYHbJGExN6Q9Rudk5uzeJhEtddHBCbZz7RAUBMqLQqwltaOOExSIHDWm322LBlKTrM9y7El+v1hzBehtSyQ7DArmF+XQjJ8+yTsPAOQRiR0dG4nKe/15c/XBzDmzST//HtOfQ11Xi9vU2QS6T4pWLghEkvCioLxwIWRIrkr+Sb5waCPKurdx2ZRbUX6lXu0qQ/LiQirPScQkdRYFytUKgFRIlfYC5uIGnIbN6hN+ZNgCvMY78cMswl9q49wWwrerymNYFjcoSNH/TMoQU8oGQm4=
